{% extends 'base.html' %}
{% block title %}Consulta Resumo geral{% endblock %}
{% block content %}
<h2>Resumo Geral</h2>

{% if resumo %}
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Tipo</th>
                <th>Descrição</th>
                <th class="td_number" >Ocorrencias</th>
                <th class="td_number" >Litros</th>
                <th class="td_number" >Km Percorrido</th>
                <th class="th_number">Valor</th>
            </tr>
        </thead>
        <tbody>
            {% for res in resumo %}
            <tr>
                <td>{{ res.id }}</td>
                <td>{{ res.descricao }}</td>
                <td class="td_number" >{{ "%.0f"|format(res.qtd) }}</td>
                <td class="td_number" >{{ "%.2f"|format(res.litros) }}</td>
                <td class="td_number" >{{ res.percorrido }}</td>
                <td class="td_number" >{{ "%.2f"|format(res.valortotal) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if resumo_mes %}
    <hr>
    <h1>Resumo por Mês</h1>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Mês</th>
                <th class="td_number" >Qtd. Registros</th>
                <th class="td_number" >Litros</th>
                <th class="td_number" >Km Percoridos</th>
                <th class="td_number" >Km / Litros</th>
                <th class="td_number" >Resultado Mês</th>
            </tr>
        </thead>
        <tbody>
            {% for res_m in resumo_mes %}
            <tr>
                <td>{{ res_m.mes }}</td>
                <td class="td_number" >{{ res_m.qtd }}</td>
                <td class="td_number" >{{ "%.2f"|format(res_m.litros) }}</td>
                <td class="td_number" >{{ res_m.percorrido }}</td>
                <td class="td_number" >{{ "%.2f"|format(res_m.lpk) }}</td>
                <td class="td_number" >{{ "%.2f"|format(res_m.valortotal) }}</td>
            </tr>
            {% endfor %}
        </tbody>
        {% if total %}
        <tfoot class="footer-total">
            <tr>
                <td>Resultado Final:</td>
                <td class="td_number" >{{ total.qtd }}</td>
                <td class="td_number" >{{ "%.2f"|format(total.litros) }}</td>
                <td class="td_number" >{{ "%.2f"|format(total.percorrido) }}</td>
                <td class="td_number" >{{ "%.2f"|format(total.lpk) }}</td>
                <td class="td_number" >{{ "%.2f"|format(total.valortotal) }}</td>
            </tr>
        </tfoot>
        {% endif %}
    </table>
    {% endif %}


{% else %}
    <div class="alert alert-warning" role="alert">
        Nenhum movimento encontrado para o período selecionado.
    </div>
{% endif %}

<a href="{{ url_for('index') }}" class="btn btn-secondary">Voltar ao Menu</a>
{% endblock %}

